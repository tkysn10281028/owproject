# 目次

- 本プロジェクトについて
- Docs
- 各実装

# 本プロジェクトについて

### 目標(Goal)

- 要件定義をなるべくシンプルにしつつ、他チームでも流用できるような技術基盤を固めることを目標とする。
  - 提供はオンライン機能を想定(他の提供方法も必要なら鋭意検討)

### 手段(Means)

- バックエンド(Java)・フロントエンド(React)　＋　環境（dev,docker,stg,prd）　の構成

### 解決(Resolution)

#### バックエンド

- 言語
  - Java(Version:17)
- FW
  - Spring Boot(3.x 系)
- ビルドツール
  - Maven
- DB

  - MySQL
  - H2Database(テストデータの投入に使用)
  - Redis(セッション情報のキャッシュに使用)

- ログ
  - Logback
- 認証
  - Google + OAuth
- その他依存関係

  - ORM Mapper
    - MyBatis
  - Migration
    - Flyway
  - セキュリティ
    - Spring Security

#### フロント

- React を使用予定

#### 環境

> ☞dev 環境、docker 環境、stg 環境、prd 環境の４環境を想定

- dev 環境
  - 目的
    - 変更内容をすぐに確認できるようにするため
  - 基本構成

```
  ┌━━━━━━━━━━━━━━━━━━━━┐
  │  ブラウザからアクセス │
  ┗━━━━━━━━━━━━━━━━━━━━┘
           │
┌━━━━━━━━━━ユーザーのホストマシン━━━━━━━━━━━━━━━━┐
           │
  ┌━━━━━━━━━━━━━━━━┐
  │  フロント CLI   │
  │ (ng run serve) │
  ┗━━━━━━━━━━━━━━━━┘
           │
  ┌━━━━━━━━━━━━━━━━━━━━━━━━━┐
  │  mvn spring-boot:run    │
  │ (Eclipse等のIDE実行でもOK)│
  ┗━━━━━━━━━━━━━━━━━━━━━━━━━┘
           │
  ┌━━Dockerコンテナ━┐
  │  MySQL         │
  ┗━━━━━━━━━━━━━━━━┘

┗━━━━━━━━━━ユーザーのホストマシン━━━━━━━━━━━━━━━━┘
```

- docker 環境

  - 目的
    1. インフラ構成ができるまでの仮環境
    2. 開発・レビューの際に作成した資材を検証する用の環境
       > 採用するインフラ構成によって動いたり動かなかったりする、といった事態を防ぎたい
  - 基本構成

    - single

      ```
      ┌━━━━━━━━━━━━━━━━━━━━┐
      │  ブラウザからアクセス  │
      ┗━━━━━━━━━━━━━━━━━━━━┘
             │
      ┌━━━━━━━━━━ユーザーのホストマシン━━━━━━━━━━━━━━━━┐
             │
        ┌━━Dockerコンテナ━━━┐
        │                  │
        │  サーバ証明書(SSL) │
        │  Webサーバ(nginx) │
        │  フロント資材      │
        │  jarファイル      │
        │                  │
        ┗━━━━━━━━━━━━━━━━━━┘
             │
        ┌━━Dockerコンテナ━┐
        │  MySQL         │
        ┗━━━━━━━━━━━━━━━━┘

      ┗━━━━━━━━━━ユーザーのホストマシン━━━━━━━━━━━━━━━━┘
      ```

    - multi

      ```
      ┌━━━━━━━━━━━━━━━━━━━━┐
      │  ブラウザからアクセス  │
      ┗━━━━━━━━━━━━━━━━━━━━┘
             │
      ┌━━━━━━━━━━ユーザーのホストマシン━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┐
             │
        ┌━━Dockerコンテナ━━━━━━━━┐
        │                       │
        │  サーバ証明書(SSL)      │
        │  ロードバランサ(nginx)  │
        │                       │
        ┗━━━━━━━━━━━━━━━━━━━━━━━┘
               │
               │
               │
           ┏━━━┷━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┐
           │                                  │
           │                                  │
       ┌━━Dockerコンテナ━━━━━━━┐        ┌━━Dockerコンテナ━━━━━━━┐
       │                      │       │                      │
       │  Webサーバ(nginx)     │       │  Webサーバ(nginx)     │
       │  フロント資材          │       │  フロント資材          │
       │                      │       │                      │
       ┗━━━━━━━━━━━━━━━━━━━━━━┘       ┗━━━━━━━━━━━━━━━━━━━━━━┘
           │                                  │
           │                                  │
           │                                  │
       ┌━━Dockerコンテナ━━━━━━━┐        ┌━━Dockerコンテナ━━━━━━━┐
       │   jarファイル         │        │     jarファイル       │
       ┗━━━━━━━━━━━━━━━━━━━━━━┘        ┗━━━━━━━━━━━━━━━━━━━━━┘
           │                                  │
           │                                  │
           │                                  │
           ┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┘
           │
           │
       ┌━━Dockerコンテナ━┐
       │  MySQL         │
       ┗━━━━━━━━━━━━━━━━┘

      ┗━━━━━━━━━━ユーザーのホストマシン━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┘
      ```

  - stg 環境

    - 目的
      - 本番と同じ構成の ST 環境として利用。パフォーマンステスト等もここで実施
    - 基本構成

    ```
      ┌━━━━━━━━━━━━━━━━━━━━┐
      │  ブラウザからアクセス  │
      ┗━━━━━━━━━━━━━━━━━━━━┘
             │
      ┌━━━━━━━━━━VPC━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┐
             │
        ┌━━IGW━━┐
        │       │
        ┗━━━━━━━┘
             │
             │
        ┌━━Amazon Route 53━━┐
        │                   │
        ┗━━━━━━━━━━━━━━━━━━━┘
             │
             │
             ┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┐
             │                                     │
        ┌━━Public Subnet 1━━━━━━┐        ┌━━Public Subnet 2━━━━━━┐
        │                       │        │                       │
        │  サーバ証明書(SSL)      │        │  サーバ証明書(SSL)      │
        │  ロードバランサ(AWS ELB)│        │  ロードバランサ(AWS ELB) │
        │  NATゲートウェイ        │        │  NATゲートウェイ        │
        │                       │        │                       │
        ┗━━━━━━━━━━━━━━━━━━━━━━━┘        ┗━━━━━━━━━━━━━━━━━━━━━━━┘
             │                                      │
             │                                      │
             │                                      │
       ┌━━Private Subnet 1━━━━┐          ┌━━Private Subnet 2━━━━┐
       │  ┌━━━EC2━━━━━━━━━━┐  │          │  ┌━━━EC2━━━━━━━━━━┐  │
       │  │ Webサーバ(nginx)│  │          │  │ Webサーバ(nginx)│  │
       │  │  フロント資材    │  │          │  │  フロント資材    │  │
       │  ┗━━━━━━━━━━━━━━━━┘  │          │  ┗━━━━━━━━━━━━━━━━┘  │
       │     │                │          │     │                │
       │     │                │          │     │                │
       │     │                │          │     │                │
       │  ┌━━━EC2━━━━━━━━━━┐  │          │  ┌━━━EC2━━━━━━━━━━┐  │
       │  │ jarファイル     │  │          │  │ jarファイル      │  │
       │  ┗━━━━━━━━━━━━━━━━┘  │          │  ┗━━━━━━━━━━━━━━━━┘  │
       │     │                │          │      │               │
       ┗━━━━━━━━━━━━━━━━━━━━━━┘          ┗━━━━━━━━━━━━━━━━━━━━━━┘
             │                                  │
             │                                  │
             │                                  │
             ┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┘
             │
             │
         ┌━━RDS━━━━┐
         │  MySQL  │
         ┗━━━━━━━━━┘

      ┗━━━━━━━━━━VPC━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┘
    ```

  - prd 環境
    - 目的
      - 本番環境。
    - 基本構成
      - stg 環境と同じ構成にする。

# Docs

### ネットワーク構成

☞ ネットワーク構成図を参照(Google SpreadSheet にて作成予定)

### 画面遷移図

☞ 画面遷移図を参照(Google SpreadSheet にて作成予定)

### コーディング規約

☞ コーディング規約を参照(Google SpreadSheet にて作成予定)

# 各実装

### バックエンド

☞[owproject_backend](https://github.com/tkysn10281028/owproject_backend)

### フロントエンド

☞owproject_frontend

### 環境(dev,docker)

☞[owproject_env](https://github.com/tkysn10281028/owproject_env)
